name: Build Kernel 
on: 
  workflow_dispatch: 
  push: 
    branches: [ main ] 
jobs: 
  build: 
    runs-on: ubuntu-latest 
    steps: 
      - name: Checkout 
        uses: actions/checkout@v4 
      - name: Install Deps 
        run: sudo apt-get update && sudo apt-get install -y build-essential bc bison flex libssl-dev libelf-dev clang lld llvm 
      - name: Toolchains 
        run: | 
          mkdir -p prebuilts/gcc/linux-x86/aarch64 
          mkdir -p prebuilts/gcc/linux-x86/arm 
          git clone https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9 -b master --depth 1 prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9 
          git clone https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9 -b master --depth 1 prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9 
      - name: Build 
        run: | 
          make O=out ARCH=arm64 CC=clang CLANG_TRIPLE=aarch64-linux-gnu- CROSS_COMPILE=$(pwd)/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9/bin/aarch64-linux-android- CROSS_COMPILE_ARM32=$(pwd)/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9/bin/arm-linux-androideabi- -j$(nproc) 
